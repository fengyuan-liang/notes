# javaå®ç°ï¼ŒäºŒå‰æœç´¢æ ‘

æ€ç»´å¯¼å›¾ï¼š

![image-20220314201110450](https://cdn.fengxianhub.top/resources-master/202203142011729.png)



## 1. æ¥å£è®¾è®¡

```java
int size();//å…ƒç´ çš„æ•°é‡
boolean isEmpty();//æ˜¯å¦ä¸ºç©º
void clear();//æ¸…é™¤æ‰€æœ‰çš„å…ƒç´ 
void add(E element);//æ·»åŠ å…ƒç´ 
void remove(E element);//åˆ é™¤å…ƒç´ 
boolean contains();//æ˜¯å¦åŒ…å«æŸå…ƒç´ 
```

## 2. æ·»åŠ æ­¥éª¤

- æ‰¾åˆ°çˆ¶ç»“ç‚¹parent
- åˆ›å»ºæ–°ç»“ç‚¹node
- parent.left = node æˆ–è€… parent.right= node
- é‡åˆ°å€¼ç›¸åŒçš„ç›´æ¥è¿”å›æˆ–è€…è¦†ç›–è¯¥å…ƒç´ ï¼ˆ**æ¨èè¦†ç›–è¯¥å…ƒç´ **ï¼Œå› ä¸ºæ¯”è¾ƒçš„å¯èƒ½æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„æŸä¸ªå€¼ç›¸ç­‰çš„è¯éœ€è¦è¦†ç›–ï¼‰

## 3. æ¯”è¾ƒè§„åˆ™å®šä¹‰

åœ¨äºŒå‰æœç´¢æ ‘ä¸­ï¼Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§ï¼Œå°±æ˜¯äºŒå‰æœç´¢æ ‘å­˜å‚¨çš„å…ƒç´ å¿…é¡»å…·å¤‡`å¯æ¯”æ€§`ï¼Œ`ä¸å…è®¸ä¸ºnull`ã€‚å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªç±»æˆ‘ä»¬å¿…é¡»è¦æŒ‡å®šæ¯”è¾ƒçš„è§„åˆ™ï¼Œ`æˆ‘ä»¬éœ€è¦å‘Šè¯‰ä¿å­˜æˆ‘ä»¬ç±»çš„é›†åˆä»€ä¹ˆæ˜¯å¤§ï¼Œä»€ä¹ˆæ˜¯å°`ï¼Œåœ¨Javaä¸­ä¸€èˆ¬æˆ‘ä»¬æœ‰ä¸¤ç§åšæ³•

### 3.1 ç¬¬ä¸€ç§ï¼šå®šä¹‰ä¸€ä¸ªæ¯”è¾ƒæ¥å£ï¼ˆç»™ç±»æ·»åŠ æ¯”è¾ƒè§„åˆ™ï¼‰

```java
public interface Comparable<E> {
    int compareTo(E e);//å®šä¹‰æ¯”è¾ƒè§„åˆ™
}
```

ç„¶åæ¯ä¸ªéœ€è¦æ¯”è¾ƒçš„å¯¹è±¡éƒ½å¿…é¡»è¦å®ç°è¿™ä¸ªæ¯”è¾ƒæ¥å£å¹¶ä¸”éœ€è¦æŒ‡å®šæ¯”è¾ƒè§„åˆ™ï¼Œä¾‹å¦‚æˆ‘è¿™é‡Œå®šä¹‰ä¸€ä¸ªPersonå¯¹è±¡

```java
public class Person implements Comparable<Person>{
    private int age;
    public Person(int age){
        this.age = age;
    }

    public int getAge(){
        return age;
    }
	/**
     * æ¯”è¾ƒè§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šè¿”å›å€¼å¤§äº1è¡¨ç¤ºå½“å‰ç±»åœ¨æ¯”è¾ƒä¸­æ˜¯å¤§çš„ï¼Œå°äº0è¡¨ç¤ºæ˜¯å°çš„ï¼Œ0è¡¨ç¤ºç›¸ç­‰
     */
    @Override
    public int compareTo(Person person) {
//        if(age > person.age) return 1; //å¯ä»¥ç®€åŒ–æˆä¸‹é¢çš„å†™æ³•
//        if(age < person.age) return -1;
//        return 0;
        return age - person.age;
    }
}
```

è¿™ç§æ¯”è¾ƒè§„åˆ™çš„ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œå°±æ˜¯æ¯”è¾ƒè§„åˆ™éƒ½å†™åœ¨å¾…æ¯”è¾ƒçš„ç±»é‡Œé¢äº†ï¼Œä¸å¤Ÿçµæ´»ï¼Œå¦‚æœæˆ‘ä»¬å¯¹ä¸¤ä¸ªé›†åˆçš„æ¯”è¾ƒè§„åˆ™ä¸ä¸€æ ·çš„è¯å°±ä¸èƒ½è¿›è¡Œåˆé€‚çš„æ¯”è¾ƒäº†ã€‚ä¾‹å¦‚æƒ³åœ¨æˆ‘æœ‰ä¸¤ä¸ªPersoné›†åˆåŒæ—¶è¿›è¡Œæ¯”è¾ƒï¼Œç¬¬ä¸€ä¸ªé›†åˆçš„æ¯”è¾ƒè§„åˆ™æ˜¯å¹´çºªå¤§çš„å¤§ï¼Œè€Œç¬¬äºŒä¸ªé›†åˆæ¯”è¾ƒè§„åˆ™æ˜¯å¹´çºªå°çš„å¤§ï¼Œè¿™æ ·çš„è¯å°±ä¸èƒ½åŒæ—¶è¿›è¡Œæ¯”è¾ƒã€‚

### 3.2 ç¬¬äºŒç§ï¼šå®šä¹‰ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼ˆç»™é›†åˆæ·»åŠ æ¯”è¾ƒè§„åˆ™ï¼‰

æˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œå¹¶å½“åšå‚æ•°ä¼ å…¥åˆ°é›†åˆ`BinarySearchTree`ä¸­

```java
/**
 * æ¯”è¾ƒå™¨ï¼Œå¯ä»¥åœ¨ç±»å¤–é¢è‡ªå®šä¹‰æ¯”è¾ƒè§„åˆ™ï¼Œè¿™ç§æ–¹å¼æ˜¯ç»™é›†åˆæŒ‡å®šæ¯”è¾ƒè§„åˆ™
 * @param <E>
 */
public interface Comparator<E> {
    int compare(E e1,E e2);
}
```

æˆ‘ä»¬åœ¨`BinarySearchTree`ä¸­é€šè¿‡æ„é€ å™¨å°±å¯ä»¥å°†æˆ‘ä»¬è‡ªå®šä¹‰çš„æ¯”è¾ƒè§„åˆ™ä¼ å…¥

```java
private Comparator<E> comparator;//æ¯”è¾ƒå™¨
public BinarySearchTree(Comparator<E> comparator){this.comparator = comparator;}
```

ç„¶åå°±å¯ä»¥éå¸¸çµæ´»çš„æ¯æ¬¡åˆ›å»ºé›†åˆçš„æ—¶å€™éƒ½æŒ‡å®šæ¯”è¾ƒè§„åˆ™ï¼Œä¹Ÿä¸ç”¨æ¯ä¸ªç±»éƒ½å»å®ç°`Comparable<E>`æ¥å£äº†

```java
/**
 * è‡ªå®šä¹‰æ¯”è¾ƒè§„åˆ™1
 */
private static class PersonComparator implements Comparator<Person>{
    @Override
    public int compare(Person e1, Person e2) {
        return e1.getAge() - e2.getAge();
    }
}
/**
 * è‡ªå®šä¹‰æ¯”è¾ƒè§„åˆ™2
 */
private static class PersonComparator2 implements Comparator<Person>{
    @Override
    public int compare(Person e1, Person e2) {
        return e2.getAge() - e1.getAge();
    }
}
@Test
public void test01(){
    BinarySearchTree<Person> bst1 = new BinarySearchTree<>(new PersonComparator());
    bst1.add(new Person(11));
    bst1.add(new Person(12));
    BinarySearchTree<Person> bst2 = new BinarySearchTree<>(new PersonComparator2());
    bst2.add(new Person(11));
    bst2.add(new Person(12));
}
```

å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡åŒ¿åå†…éƒ¨ç±»è¿›è¡Œç®€åŒ–

```java
@Test
public void test01(){
    BinarySearchTree<Person> bst1 = new BinarySearchTree<>(new Comparator<Person>() {
        @Override
        public int compare(Person e1, Person e2) {
            return e1.getAge() - e2.getAge();
        }
    });
    bst1.add(new Person(11));
    bst1.add(new Person(12));
    BinarySearchTree<Person> bst2 = new BinarySearchTree<>(new Comparator<Person>() {
        @Override
        public int compare(Person e1, Person e2) {
            return e2.getAge() - e1.getAge();
        }
    });
    bst2.add(new Person(11));
    bst2.add(new Person(12));
}
```

ä¸è¿‡æˆ‘ä»¬ä¸€èˆ¬å¼€å‘éƒ½æ˜¯ä¼šä½¿ç”¨`Lambdaè¯­æ³•`è¿›è¡Œè¿›ä¸€æ­¥çš„ç®€åŒ–

```java
@Test
public void test01(){
    BinarySearchTree<Person> bst1 = new BinarySearchTree<>((e1, e2) -> e1.getAge() - e2.getAge());
    bst1.add(new Person(11));
    bst1.add(new Person(12));
    BinarySearchTree<Person> bst2 = new BinarySearchTree<>((e1, e2) -> e2.getAge() - e1.getAge());
    bst2.add(new Person(11));
    bst2.add(new Person(12));
}
```

è¿™ä¸¤ç§æ–¹å¼éƒ½å¾ˆå¸¸è§ï¼Œç¬¬ä¸€ç§æ–¹æ³•æˆ‘ä»¬åœ¨ç»™`List<E>`è¿›è¡Œæ’åºçš„æ—¶å€™ç»å¸¸ç”¨åˆ°`Collections.sort()`å¯¹å…¶è¿›è¡Œæ’åºï¼Œåªéœ€è¦åœ¨éœ€è¦æ’åºçš„ç±»`E`ä¸­å®ç°`java.lang.Comparable<E>`æ¯”è¾ƒæ¥å£å°±å¯ä»¥äº†ï¼Œæ¯”è¾ƒè§„åˆ™ä¹Ÿæ˜¯åœ¨æ¯ä¸€æ¬¡çš„æ¯”è¾ƒä¸­è¿”å›å¤§äº1çš„æ•°è¡¨ç¤ºå½“å‰ç±»å¤§ï¼Œè¿”å›å°äº0çš„æ•°è¡¨ç¤ºå½“å‰ç±»å°ï¼Œè¿”å›0è¡¨ç¤ºä¸€æ ·å¤§ã€‚å½“ç„¶listæœ¬èº«è‡ªå·±ä¹Ÿæœ‰`sort()`æ–¹æ³•ç”¨æ¥å¯¹å…¶ä¸­çš„å¯¹è±¡è¿›è¡Œæ’åº

é€šè¿‡Collections.sort()çš„æ–¹å¼

```java
@Test
public void test02(){
    List<Person> list = new ArrayList<>();
    list.add(new Person(20));
    list.add(new Person(19));
    Collections.sort(list,Person::compareTo);
    list.forEach(e -> System.out.println(e.getAge()));
}
```

é€šè¿‡list.sort()è¿›è¡Œæ’åº

```java
@Test
public void test02(){
    List<Person> list = new ArrayList<>();
    list.add(new Person(20));
    list.add(new Person(19));
    list.sort(Person::compareTo);
    list.forEach(e -> System.out.println(e.getAge()));
}
```

è¿˜å¯ä»¥ç”¨stream API

```java
@Test
public void test02(){
    List<Person> list = new ArrayList<>();
    list.add(new Person(20));
    list.add(new Person(19));
    list.stream()
            .sorted()
            .forEach(e -> System.out.println(e.getAge()));
}
```

ç¬¬äºŒç§æ–¹å¼ä½¿ç”¨`Comparator<E>`æ¯”è¾ƒå™¨ï¼Œç»™æ¯ä¸€ä¸ªé›†åˆå®šåˆ¶æ¯”è¾ƒè§„åˆ™ï¼Œå…¶å®è¿™ç§æ–¹å¼æ›´åŠ å¸¸ç”¨ï¼Œä¸€èˆ¬å¼€å‘ä¸­æˆ‘ä»¬éƒ½æ˜¯ç”¨çš„è¿™ç§æ–¹æ³•ï¼Œç»™é›†åˆå®šåˆ¶æ¯”è¾ƒè§„åˆ™ï¼Œè€Œä¸æ˜¯å»ç»™ç±»å®ç°æ¯”è¾ƒæ¥å£

é€šè¿‡Collections.sort()çš„æ–¹å¼

```java
@Test
public void test02(){
    List<Person> list = new ArrayList<>();
    list.add(new Person(20));
    list.add(new Person(19));
    Collections.sort(list, new java.util.Comparator<Person>() {
        @Override
        public int compare(Person o1, Person o2) {
            return o2.getAge() - o1.getAge();
        }
    });
}

//Lambdaç®€åŒ–
@Test
public void test02(){
    List<Person> list = new ArrayList<>();
    list.add(new Person(20));
    list.add(new Person(19));
    Collections.sort(list, (o1, o2) -> o2.getAge() - o1.getAge());
}
```

é€šè¿‡list.sort()è¿›è¡Œæ’åº

```java
@Test
public void test02(){
    List<Person> list = new ArrayList<>();
    list.add(new Person(20));
    list.add(new Person(19));
    list.sort(new java.util.Comparator<Person>() {
        @Override
        public int compare(Person o1, Person o2) {
            return o1.getAge() - o2.getAge();
        }
    });
}

//Lambdaç®€åŒ–
@Test
public void test02(){
    List<Person> list = new ArrayList<>();
    list.add(new Person(20));
    list.add(new Person(19));
    list.sort((o1, o2) -> o2.getAge() - o1.getAge());
}
```

stream API

```java
@Test
public void test02(){
    List<Person> list = new ArrayList<>();
    list.add(new Person(20));
    list.add(new Person(19));
    list.stream()
            .sorted((o1, o2) -> o2.getAge() - o1.getAge())
            .forEach(e -> System.out.println(e.getAge()));
}
```

### 3.3 æœ€ç»ˆè§£å†³æ–¹æ¡ˆ

ç¬¬ä¸€ç§æ–¹æ³•è®©ç±»å»å®ç°`Comparable<E>`å¹¶è‡ªå®šä¹‰`compareTo`æ–¹æ³•ä¸å¤Ÿçµæ´»ï¼Œæ— æ³•å¯¹æ¯ä¸ªé›†åˆå¯¹å®šåˆ¶æ¯”è¾ƒè§„åˆ™

ç¬¬äºŒç§æ–¹æ³•æ¯”è¾ƒçµæ´»ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½éœ€è¦ä¼ å…¥æ¯”è¾ƒå™¨

**ç»¼ä¸Šæ‰€è¿°ï¼šæˆ‘ä»¬å¯ä»¥ç»“åˆä¸¤è€…ä½¿ç”¨**ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ç»™é›†åˆå®šåˆ¶çš„æ¯”è¾ƒå™¨ï¼Œä¹Ÿå¯ä»¥ä¸ä¼ ï¼Œä¸ä¼ å°±é»˜è®¤ä½¿ç”¨ç±»å®ç°æ¯”è¾ƒæ¥å£çš„æ¯”è¾ƒå™¨ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨é›†åˆä¸­å†™æˆè¿™æ ·çš„è¯å…¶å®ä¹Ÿæœ‰é—®é¢˜ï¼Œå°±æ˜¯å¾…æ¯”è¾ƒçš„ç±»æˆ‘ä»¬éƒ½å¿…é¡»å®ç°æ¯”è¾ƒæ¥å£ï¼Œä¸å®ç°å°±æŠ¥é”™

```java
public class BinarySearchTree<E extends Comparable<E>> {}
```

**ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜**ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é›†åˆä¸­å…·ä½“çš„æ¯”è¾ƒä¸­è¿™æ ·å†™ï¼Œè¿™æ ·çš„è¯æ—¢ä¸ç”¨å¼ºåˆ¶è®©ç±»å®ç°æ¯”è¾ƒæ¥å£ï¼Œåˆä¸ç”¨å¼ºåˆ¶ç»™é›†åˆä¼ å…¥æ¯”è¾ƒå™¨ï¼Œå½“ç„¶Javaå…¶å®å·²ç»å®ç°äº†`comparator`å’Œ`Comparable`

```java
/**
 * è§„å®šä¼ å…¥å¯¹è±¡çš„æ¯”è¾ƒè§„åˆ™
 * @param e1 ç¬¬ä¸€ä¸ªå¯¹è±¡
 * @param e2 ç¬¬äºŒä¸ªå¯¹è±¡
 * @return 0è¡¨ç¤ºç›¸ç­‰ï¼Œå¤§äº0è¡¨ç¤º e1 > e2,å°äº0è¡¨ç¤º e2 < e1
 */
@SuppressWarnings("unchecked")//è¡¨ç¤ºä¸è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢æç¤ºï¼Œå³ä¸‹é¢ç±»å‹è½¬æ¢çš„æ—¶å€™æ²¡æœ‰ç±»å‹è£…æ¢æç¤º
private int compare(E e1,E e2){
    if(comparator != null){
        return comparator.compare(e1,e2);
    }
    return ((Comparable<E>) e1).compareTo(e2);
}
```

è´´ä¸€ä¸‹å®ç°äº†éƒ¨åˆ†åŠŸèƒ½çš„ä»£ç ï¼Œå¯ä»¥å®ç°æ¯”è¾ƒå’Œæ’å…¥

```java
package com.fx.binarySearchTree;

import com.fx.printer.BinaryTreeInfo;

import java.util.Stack;

/**
 * @author: Eureka
 * @date: 2022/3/14 20:12
 * Description: äºŒå‰æœç´¢æ ‘
 */
@SuppressWarnings("unchecked")
public class BinarySearchTree<E> implements BinaryTreeInfo {
    //ç»“ç‚¹ä»¥å†…éƒ¨ç±»çš„å½¢å¼å­˜åœ¨
    private static class Node<E> {
        E element;//å½“å‰ç»“ç‚¹ä¿å­˜çš„å…ƒç´ 
        Node<E> left;//å·¦ç»“ç‚¹
        Node<E> right;//å³ç»“ç‚¹
        Node<E> parent;//çˆ¶ç»“ç‚¹

        public Node(E element, Node<E> parent) {
            this.element = element;
            this.parent = parent;
        }
    }

    private int size;//å½“å‰æ ‘ç»“ç‚¹ä¸ªæ•°
    private Node<E> root;//æ ¹ç»“ç‚¹
    private Comparator<E> comparator;//æ¯”è¾ƒå™¨

    public BinarySearchTree() {

    }

    public BinarySearchTree(Comparator<E> comparator) {
        this.comparator = comparator;
    }

    public void add(E element) {
        //éç©ºæ£€æµ‹
        elementNotNullCheck(element);
        //å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºæ ¹ç»“ç‚¹
        if (root == null) {
            root = new Node<>(element, null);
        }
        //éæ ¹ç»“ç‚¹ï¼Œéé€’å½’è¿›è¡Œæ·»åŠ 
        Node<E> node = root;//ç”¨æ¥æ ‡è®°ç§»åŠ¨çš„ç»“ç‚¹
        Node<E> parent = root;//ä¿å­˜å½“å‰ç»“ç‚¹çš„çˆ¶ç»“ç‚¹ï¼Œé»˜è®¤æ ¹ç»“ç‚¹å°±æ˜¯çˆ¶ç»“ç‚¹
        //æ ¹æ®æ¯”è¾ƒè§„åˆ™æ‰¾åˆ°å¾…æ·»åŠ å…ƒç´ çš„ä½ç½®
        int cmp = 0;
        while (node != null) {
            //æ¯”è¾ƒå€¼
            cmp = compare(element, node.element);
            //ä¿å­˜å½“å‰ç»“ç‚¹çš„çˆ¶ç»“ç‚¹
            parent = node;
            if (cmp > 0) {
                node = node.right;
            } else if (cmp < 0) {
                node = node.left;
            } else {
                return;
            }
        }
        //æ·»åŠ å…ƒç´ 
        Node<E> newNode = new Node<>(element, parent);
        if (cmp > 0) {
            parent.right = newNode;
        } else {
            parent.left = newNode;
        }
    }

    public void remove(E element) {

    }

    public boolean contains(E e1, E e2) {
        return true;
    }

    /**
     * è§„å®šä¼ å…¥å¯¹è±¡çš„æ¯”è¾ƒè§„åˆ™
     *
     * @param e1 ç¬¬ä¸€ä¸ªå¯¹è±¡
     * @param e2 ç¬¬äºŒä¸ªå¯¹è±¡
     * @return 0è¡¨ç¤ºç›¸ç­‰ï¼Œå¤§äº0è¡¨ç¤º e1 > e2,å°äº0è¡¨ç¤º e2 < e1
     */
    private int compare(E e1, E e2) {
        if (comparator != null) {
            return comparator.compare(e1, e2);
        }
        //è¿™æ ·è£…æ¢å¯ä»¥ä¸ç”¨å¼ºåˆ¶è¦æ±‚ç±»å®ç°Comparableæ¥å£
        return ((java.lang.Comparable<E>) e1).compareTo(e2);
    }

    /**
     * è¿”å›æ ‘ç»“ç‚¹ä¸ªæ•°
     */
    public int size() {
        return size;
    }

    /**
     * åˆ¤æ–­æ ‘æ˜¯å¦ä¸ºç©º
     */
    public boolean isEmpty() {
        return size == 0;
    }

    /**
     * æ¸…ç©ºå½“å‰æ ‘
     */
    public void clear() {

    }


    /**
     * åˆ¤æ–­å…ƒç´ æ˜¯å¦ä¸ºç©º
     */
    private void elementNotNullCheck(E element) {
        if (element == null) {
            throw new IllegalArgumentException("element must not be null");
        }
    }
}

```



## 4. éå†äºŒå‰æœç´¢æ ‘

ä¸€å…±æœ‰å››ç§éå†æ–¹å¼ï¼š

```sh
å‰åºéå†(Preorder Traversal)
ä¸­åºéå†(Inorder Traversal)
åç»­éå†(Postorder Traversal)
å±‚åºéå†(Level Order Traversal)
```

### 4.1 å‰åºéå†

å…¶å®æˆ‘åœ¨è®°è¿™äº›éå†çš„æ—¶å€™æ›´å–œæ¬¢è®°ä¸º`å‰æ ¹éå†`ã€`ä¸­æ ¹éå†`ã€`åæ ¹éå†`ï¼Œå¯¹åº”ç€éå†çš„åˆ†åˆ«æ˜¯ï¼Œå½“ç„¶ä¹Ÿå¯¹åº”ä¸€äº›æ–¹æ³•

```css
å‰æ ¹éå† --> æ ¹å·¦å³ --> åŒ…çº¿æ³•
ä¸­æ ¹éå† --> å·¦æ ¹å³
åæ ¹éå† --> å·¦å³æ ¹
```

å‰æ ¹éå†ï¼Œå°±æ˜¯å…ˆéå†æ ¹ç»“ç‚¹ï¼Œç„¶åå·¦å­æ ‘ï¼Œå³å­æ ‘ï¼Œä¸¾ä¸ªæ —å­ï¼š

![image-20220319113726689](https://cdn.fengxianhub.top/resources-master/202203191137792.png)

#### 4.1.1 é€’å½’å®ç°

```java
/**
 * å‰åºéå†
 */
public void preorderTraversal(){
    preorderTraversal(root);
}
public void preorderTraversal(Node<E> node){
    if(node == null) return;
    //ä¸šåŠ¡ä»£ç 
    System.out.println(node.element);
    preorderTraversal(node.left);
    preorderTraversal(node.right);
}
```

#### 4.1.2 éé€’å½’ã€è¿­ä»£å®ç°ï¼ˆä½¿ç”¨æ ˆå®ç°ï¼‰

![image-20220319142400211](https://cdn.fengxianhub.top/resources-master/202203191424299.png)

ä»£ç å®ç°ï¼š

```java
private final Stack<Node<E>> stack = new Stack<>();

public void preorderTraversalByStack(){
    //å°†æ ¹å…ƒç´ å…¥æ ˆ
    preorderTraversalByStack(root);
}
public void preorderTraversalByStack(Node<E> popNode){
    while (popNode != null){
        //è¾“å‡ºå…ƒç´ 
        System.out.println(popNode.element);
        //å°†å…¶å³ç»“ç‚¹å…¥æ ˆ
        if(popNode.right != null){
            stack.push(popNode.right);
        }
        //å°†å…¶å·¦ç»“ç‚¹å…¥æ ˆ
        if(popNode.left != null){
            stack.push(popNode.left);
        }
        //å°†æ ˆé¡¶å…ƒç´ å‡ºæ ˆ
        popNode = stack.isEmpty() ?  null :  stack.pop();
    }
}
```

### 4.2 ä¸­åºéå†

ä¸­åºéå†ï¼Œæ ¹ç»“ç‚¹åœ¨ä¸­é—´ï¼Œä¾‹å¦‚å·¦æ ¹å³ã€å³æ ¹å·¦ï¼Œä¸¾ä¸ªæ —å­ï¼š

![image-20220319141624612](https://cdn.fengxianhub.top/resources-master/202203191416835.png)

#### 4.2.1 é€’å½’å®ç°

```java
/**
 * ä¸­åºéå†ï¼ˆé€’å½’å®ç°ï¼‰
 */
public void inorderTraversal(){
    inorderTraversal(root);
}
public void inorderTraversal(Node<E> node){
    if(node == null) return;
    inorderTraversal(node.left);
    System.out.println(node.element);
    inorderTraversal(node.right);
}
```

å¦‚æœæƒ³è¦é™åºåªéœ€è¦æ”¹å˜ä¸€ä¸‹é€’å½’çš„é¡ºåº

```java
public void inorderTraversal(Node<E> node){
    if(node == null) return;
    inorderTraversal(node.right);
    System.out.println(node.element);
    inorderTraversal(node.left);
}
```

#### 4.2.2 éé€’å½’(æ ˆå®ç°)

![image-20220319145900600](https://cdn.fengxianhub.top/resources-master/202203191459717.png)

```java
public void inorderTraversalByStack() {
    inorderTraversalByStack(root);
}
public void inorderTraversalByStack(Node<E> popNode) {
    //åªè¦å·¦ç»“ç‚¹å­˜åœ¨å°±ä¸€ç›´å…¥æ ˆ
    while (true) {
        if(popNode != null){
            stack.push(popNode);
            popNode = popNode.left;
        }else {
            if(stack.isEmpty()) return;
            popNode = stack.pop();
            //ä¸šåŠ¡é€»è¾‘
            System.out.println(popNode.element);
            popNode = popNode.right;
        }
    }
}
```

### 4.3 ååºéå†

![image-20220319153615549](https://cdn.fengxianhub.top/resources-master/202203191536662.png)

#### 4.3.1 é€’å½’å®ç°

```java
public void postorderTraversal() {
    postorderTraversal(root);
}
public void postorderTraversal(Node<E> node) {
    if (node == null) return;
    postorderTraversal(node.left);
    postorderTraversal(node.right);
    System.out.println(node.element);
}
```

#### 4.3.2 éé€’å½’(æ ˆå®ç°)

![image-20220319154437720](https://cdn.fengxianhub.top/resources-master/202203191544812.png)

```java
public void postorderTraversalByStack(TreeNode root) {
    if (root == null) return;
    Stack<TreeNode> stack = new Stack<>();
    stack.push(root);
    TreeNode temp = null;
    while (!stack.isEmpty()) {
        temp = stack.pop();
        //ä¸šåŠ¡é€»è¾‘
        System.out.println(temp);
        if (temp.left != null) {
            stack.push(temp.left);
        }
        if (temp.right != null) {
            stack.push(temp.right);
        }
    }
}
```



### 4.4 å±‚åºéå†

![image-20220319194133203](https://cdn.fengxianhub.top/resources-master/202203191941444.png)

#### 4.4.1 é˜Ÿåˆ—å®ç°å±‚åºéå†

ç”±äºå±‚åºéå†çš„æ€§è´¨ï¼Œæ˜¾ç„¶é€’å½’æ˜¯æ— æ³•å®ç°çš„ï¼Œæ‰€ä»¥æœ€å¥½é‡‡ç”¨é˜Ÿåˆ—è¿›è¡Œå®ç°

```java
public void leverOrderTraversal(){
    if(root == null) return;
    Queue<Node<E>> queue = new LinkedList<>();
    //å°†æ ¹ç»“ç‚¹å…¥é˜Ÿ
    queue.offer(root);
    while (!queue.isEmpty()){
        //å‡ºé˜Ÿ
        Node<E> node = queue.poll();
        System.out.print(node.element);
        if(node.left !=null) queue.offer(node.left);
        if(node.right !=null) queue.offer(node.right);
    }
}
```

### 4.5 LeetCodeå¯¹åº”ç»ƒä¹ 

-  <a href="https://leetcode-cn.com/problems/binary-tree-preorder-traversal/ ">äºŒå‰æ ‘çš„å‰åºéå†</a>ï¼š https://leetcode-cn.com/problems/binary-tree-preorder-traversal/ ï¼ˆé€’å½’+è¿­ä»£ï¼‰
- <a href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal">äºŒå‰æ ‘çš„ä¸­åºéå†</a> :    https://leetcode-cn.com/problems/binary-tree-inorder-traversal/    ï¼ˆé€’å½’+è¿­ä»£ï¼‰
- äºŒå‰æ ‘çš„ååºéå†ï¼š https://leetcode-cn.com/problems/binary-tree-postorder-traversal/ ï¼ˆé€’å½’+è¿­ä»£ï¼‰ 
- äºŒå‰æ ‘çš„å±‚æ¬¡éå†ï¼š https://leetcode-cn.com/problems/binary-tree-level-order-traversal/ ï¼ˆè¿­ä»£ï¼‰ 
- äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼š https://leetcode-cn.com/problems/maximum-depth-of-binary-tree/ ï¼ˆé€’å½’+è¿­ä»£ï¼‰

- äºŒå‰æ ‘çš„å±‚æ¬¡éå†IIï¼š https://leetcode-cn.com/problems/binary-tree-level-order-traversal-ii/
- äºŒå‰æ ‘æœ€å¤§å®½åº¦ï¼šhttps://leetcode-cn.com/problems/maximum-width-of-binary-tree/ 
- Nå‰æ ‘çš„å‰åºéå†ï¼š https://leetcode-cn.com/problems/n-ary-tree-preorder-traversal/ 
- Nå‰æ ‘çš„ååºéå†ï¼š https://leetcode-cn.com/problems/n-ary-tree-postorder-traversal/
- Nå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼š https://leetcode-cn.com/problems/maximum-depth-of-n-ary-tree/ 

## 5. è®¾è®¡å¯¹å¤–éå†æš´éœ²çš„æ¥å£

### 5.1 è®¾è®¡å¯¹å¤–éå†æš´éœ²çš„æ¥å£

åœ¨å‰é¢çš„å››ç§éå†æ–¹å¼ä¸­ï¼Œéƒ½åªæ˜¯æŠŠéå†åˆ°çš„å…ƒç´ æ‰“å°äº†å‡ºæ¥ï¼Œä½†æˆ‘ä»¬å®é™…åº”ç”¨çš„ä¸šåŠ¡åœºæ™¯å¯ä»¥å¹¶ä¸æ˜¯å»æ‰“å°éå†åˆ°çš„å…ƒç´ ï¼Œå¯èƒ½å®ç°æƒ³å¯¹éå†åˆ°çš„å…ƒç´ åŠ ä¸€ã€‚æ‰€ä»¥æˆ‘ä»¬å¯¹å¤–æš´éœ²çš„éå†æ¥å£éœ€è¦é‡å†™ä¼˜åŒ–ä¸€ä¸‹ï¼

æ ¸å¿ƒæ€æƒ³ä¸ä¹‹å‰`æ¯”è¾ƒè§„åˆ™å®šä¹‰`çš„æ€è·¯ä¸€æ ·ï¼Œè®©ç”¨æˆ·åœ¨éå†ä¹‹å‰å°†å¯¹å…ƒç´ æ“ä½œçš„é€»è¾‘ä¼ å…¥åˆ°éå†çš„å‡½æ•°ä¸­

**å®šä¹‰éå†çš„å›è°ƒæ¥å£**

```java
//éå†æ¥å£ï¼Œæ¥å£å¯ä»¥å†™åœ¨BSTå†…éƒ¨
public interface Visitor<E>{
    void visit(E element);
}
```

ä¿®æ”¹ä¸€ä¸‹å‰é¢çš„ä»£ç ï¼Œå°†å¯¹éå†åˆ°å…ƒç´ çš„ä¸šåŠ¡é€»è¾‘äº¤ç»™è°ƒç”¨è€…ä¼ å…¥

```java
//å±‚æ¬¡éå†æ¥å£æš´éœ²
public void leverOrderTraversal(Visitor<E> visitor){
    if(root == null || visitor == null){
        throw new IllegalArgumentException("å‚æ•°ä¸åˆæ³•");
    }
    Queue<Node<E>> queue = new LinkedList<>();
    //å°†æ ¹ç»“ç‚¹å…¥é˜Ÿ
    queue.offer(root);
    while (!queue.isEmpty()){
        //å‡ºé˜Ÿ
        Node<E> node = queue.poll();
        //å›è°ƒï¼Œå°†å¤„ç†éå†æ•°æ®çš„ä¸šåŠ¡äº¤ç»™è°ƒç”¨è€…
        visitor.visit(node.element);
        if(node.left !=null) queue.offer(node.left);
        if(node.right !=null) queue.offer(node.right);
    }
}
```

æˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼š

```java
@Test
public void test03(){
    int[] arr = new int[]{7,4,9,2,5,8,11,3};
    BinarySearchTree<Integer> bst1 = new BinarySearchTree<>();
    //å°†æ•°æ®æ·»åŠ åˆ°BSTä¸­
    Arrays.stream(arr).forEach(bst1::add);
    bst1.leverOrderTraversal(new BinarySearchTree.Visitor<Integer>() {
        @Override
        public void visit(Integer element) {
            System.out.println(element);
        }
    });
}

//Lambdaç®€åŒ–
@Test
public void test03(){
    int[] arr = new int[]{7,4,9,2,5,8,11,3};
    BinarySearchTree<Integer> bst1 = new BinarySearchTree<>();
    //å°†æ•°æ®æ·»åŠ åˆ°BSTä¸­
    Arrays.stream(arr).forEach(bst1::add);
    bst1.leverOrderTraversal(System.out::println);
}
```

å…¶ä»–çš„éå†æ–¹æ³•ä¹Ÿæ˜¯ä¸€æ ·ï¼Œæˆ‘ä»¬æœ€åæ¥æµ‹è¯•ä¸€ä¸‹æ‰€æœ‰çš„éå†æ–¹æ³•

```java
@Test
public void test03(){
    int[] arr = new int[]{7,4,9,2,5,8,11,3};
    BinarySearchTree<Integer> bst = new BinarySearchTree<>();
    //å°†æ•°æ®æ·»åŠ åˆ°BSTä¸­
    Arrays.stream(arr).forEach(bst::add);
    //å°†äºŒå‰æ ‘çš„æ ‘å‹ç»“æ„æ‰“å°å‡ºæ¥
    BinaryTrees.println(bst);
    //å‰åº
    System.out.print("å‰åºï¼š");
    bst.preorderTraversal(e -> System.out.print(e + " "));
    System.out.println();
    //ä¸­åº
    System.out.print("ä¸­åºï¼š");
    bst.inorderTraversal(e -> System.out.print(e + " "));
    System.out.println();
    //ååº
    System.out.print("ååºï¼š");
    bst.postorderTraversal(e -> System.out.print(e + " "));
    System.out.println();
    //å±‚æ¬¡éå†
    System.out.print("å±‚åºï¼š");
    bst.leverOrderTraversal(e -> System.out.print(e + " "));
}
```

ç»“æœï¼š

```java
  â”Œâ”€â”€7â”€â”€â”
  â”‚     â”‚
â”Œâ”€4â”€â” â”Œâ”€9â”€â”
â”‚   â”‚ â”‚   â”‚
2â”€â” 5 8   11
  â”‚
  3
å‰åºï¼š7 4 2 3 5 9 8 11 
ä¸­åºï¼š2 3 4 5 7 8 9 11 
ååºï¼š3 2 5 4 8 11 9 7 
å±‚åºï¼š7 4 9 2 5 8 11 3 
```

### 5.2 å¢å¼ºå¯¹å¤–éå†æš´éœ²çš„æ¥å£

æˆ‘ä»¬ç°åœ¨å®ç°çš„éå†æ¥å£è¿˜æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œé‚£å°±æ˜¯å½“è°ƒç”¨è€…è°ƒç”¨éå†æ–¹æ³•åå°±åœä¸ä¸‹æ¥äº†ï¼Œä½†æ˜¯å¦‚æœè°ƒç”¨è€…éå†åˆ°æ¯ä¸ªæ•°æ—¶å°±æƒ³è¦è®©è¿™æ¬¡éå†ç»“æŸï¼Œæˆ‘ä»¬çš„æ¥å£æ˜¯ä¸èƒ½å®ç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å¢å¼ºä¸€ä¸‹æˆ‘ä»¬çš„æ¥å£

æ ¸å¿ƒæ˜¯å°†æ¥å£æä¾›çš„å›è°ƒå‡½æ•°çš„è¿”å›å€¼æ”¹ä¸ºå¸ƒå°”ç±»å‹ï¼Œå½“å…¶è¿”å›`true`æ—¶ï¼Œéå†åœæ­¢ï¼Œä½†æ˜¯é€’å½’éå†ä¸­æ˜¯ä¸èƒ½ç”¨è¿”å›å€¼è¿›è¡Œåˆ¤æ–­çš„ï¼Œå› ä¸ºæ¯ä¸€æ¬¡é€’å½’éƒ½æ˜¯ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œæ— æ³•ä¿å­˜æ ‡è®°çš„å±æ€§ï¼Œæ‰€ä»¥å¯ä»¥åœ¨å°†æ¥å£æ”¹æˆæŠ½è±¡ç±»å¹¶å¢åŠ ä¸€ä¸ªå±æ€§

**ä¿®æ”¹æ¥å£ï¼š**ï¼ˆæŠ½è±¡ç±»ä¸èƒ½ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼Œéœ€è¦ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ï¼‰

```java
/**
 * éå†æ¥å£
 * @param <E>
 *
 * visit è¿”å›trueè¡¨ç¤ºåœæ­¢éå†<br>è¿”å›falseè¡¨ç¤ºä¸åœæ­¢ï¼Œç»§ç»­éå†
 */
public abstract static class Visitor<E>{
    /**
     * stopç”¨æ¥æ ‡è®°é€’å½’éå†ä¸­æ˜¯å¦éœ€è¦åœæ­¢éå†
     */
    boolean stop = false;
    abstract boolean visit(E element);
}
```

**ä¿®æ”¹å±‚æ¬¡éå†ï¼š**

```java
/**
 * å±‚æ¬¡éå†æ¥å£æš´éœ²
 * @param visitor é€»è¾‘æ¥å£
 */
public void leverOrderTraversal(Visitor<E> visitor){
    if(visitor == null || root == null) throw new IllegalArgumentException("Visitorä¸èƒ½ä¸ºç©º");
    Queue<Node<E>> queue = new LinkedList<>();
    //å°†æ ¹ç»“ç‚¹å…¥é˜Ÿ
    queue.offer(root);
    while (!queue.isEmpty()){
        //å‡ºé˜Ÿ
        Node<E> node = queue.poll();
        //å›è°ƒï¼Œå°†å¤„ç†éå†æ•°æ®çš„ä¸šåŠ¡äº¤ç»™è°ƒç”¨è€…ï¼Œå¦‚æœè¿”å›trueåœæ­¢éå†
        if(visitor.visit(node.element)) return;
        if(node.left !=null) queue.offer(node.left);
        if(node.right !=null) queue.offer(node.right);
    }
}
```

**æµ‹è¯•ï¼š**

```java
@Test
public void test03(){
    int[] arr = new int[]{7,4,9,2,5,8,11,3};
    BinarySearchTree<Integer> bst = new Binar
    //å°†æ•°æ®æ·»åŠ åˆ°BSTä¸­
    Arrays.stream(arr).forEach(bst::add);
    //æ‰“å°æ ‘å‹ç»“æ„
    BinaryTrees.println(bst);
    //å±‚æ¬¡éå†
    System.out.print("å±‚åºï¼š");
    bst.leverOrderTraversal(new BinarySearchTree.Visitor<Integer>() {
        @Override
        boolean visit(Integer element) {
            System.out.print(element + " ");
            return element == 2;;
        }
    });
}

ç»“æœï¼š
  â”Œâ”€â”€7â”€â”€â”
  â”‚     â”‚
â”Œâ”€4â”€â” â”Œâ”€9â”€â”
â”‚   â”‚ â”‚   â”‚
2â”€â” 5 8   11
  â”‚
  3
å±‚åºï¼š7 4 9 2 
```

**ä¿®æ”¹ååºéå†ï¼š**

```java
/**
 * ååºéå†
 */
public void postorderTraversal(Visitor<E> visitor) {
    if(visitor == null) throw new IllegalArgumentException("visitorä¸èƒ½ä¸ºç©º");
    postorderTraversal(root,visitor);
}
public void postorderTraversal(Node<E> node,Visitor<E> visitor) {
    //ç¬¬ä¸€ä¸ªvisitor.stopè®©é€’å½’ç»ˆæ­¢
    if (node == null || visitor.stop) return;
    postorderTraversal(node.left,visitor);
    postorderTraversal(node.right,visitor);
    //ç¬¬äºŒä¸ªvisitor.stopè®©è°ƒç”¨è€…çš„ä¸šåŠ¡é€»è¾‘åœæ­¢
    if(visitor.stop) return;
    visitor.stop = visitor.visit(node.element);
}
```

**ä¿®æ”¹ä¸­åºéå†ï¼š**

```java
/**
 * ä¸­åºéå†ï¼ˆé€’å½’å®ç°ï¼‰
 */
public void inorderTraversal(Visitor<E> visitor) {
    if(visitor == null) throw new IllegalArgumentException("visitorä¸èƒ½ä¸ºç©º");
    inorderTraversal(root,visitor);
}
private void inorderTraversal(Node<E> node,Visitor<E> visitor) {
    if (node == null) return;
    inorderTraversal(node.left,visitor);
    //å›è°ƒ
    if(visitor.stop) return;
    visitor.stop = visitor.visit(node.element);
    inorderTraversal(node.right,visitor);
}
```

**ä¿®æ”¹å‰åºéå†ï¼š**

```java
/**
 * å‰åºéå†
 */
public void preorderTraversal(Visitor<E> visitor) {
    if(visitor == null) throw new IllegalArgumentException("visitorä¸èƒ½ä¸ºç©º");
    preorderTraversal(root,visitor);
}
private void preorderTraversal(Node<E> node, Visitor<E> visitor) {
    if(node == null || visitor.stop) return;
    //å›è°ƒ
    if(visitor.stop) return;
    visitor.stop = visitor.visit(node.element);
    preorderTraversal(node.left,visitor);
    preorderTraversal(node.right,visitor);
}
```



## 6. å„ç§éå†çš„åº”ç”¨

- å‰åºéå†å¯ä»¥ç”¨æ¥æ‰“å°äºŒå‰æ ‘

- BSTä¸­åºéå†çš„å…ƒç´ æ˜¯å‡åºæˆ–è€…é™åºï¼Œå¯ä»¥ç”¨æ¥å¤„ç†æœ‰åºé›†åˆ

- ååºéå†é€‚ç”¨äºä¸€äº›å…ˆå­åçˆ¶çš„æ“ä½œ

- å±‚åºéå†å¯ä»¥ç”¨æ¥è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦å’Œç”¨æ¥åˆ¤æ–­å½“å‰æ ‘æ˜¯å¦æ˜¯å®Œå…¨äºŒå‰æ ‘

  - åˆ¤æ–­äºŒå‰æ ‘é«˜åº¦

    ```java
    /**
     * éé€’å½’è¿”å›æ ‘çš„é«˜åº¦
     *
     * @return æ ‘çš„é«˜åº¦
     */
    public int heightByLevelOrder() {
        Queue<Node<E>> queue = new LinkedList<>();
        //å°†æ ¹ç»“ç‚¹å…¥é˜Ÿ
        queue.offer(root);
        //è®°å½•æ ‘çš„é«˜åº¦
        int height = 0;
        //è®°å½•æ¯ä¸€å±‚çš„å…ƒç´ æ•°é‡
        int levelSize = 1;
        while (!queue.isEmpty()) {
            //å‡ºé˜Ÿ
            Node<E> node = queue.poll();
            //å½“å‰å±‚å…ƒç´ å‡å°‘
            levelSize--;
            if (node.left != null) queue.offer(node.left);
            if (node.right != null) queue.offer(node.right);
            //è®¿é—®ä¸‹ä¸€å±‚
            if (levelSize == 0) {
                levelSize = queue.size();
                height++;
            }
        }
        return height;
    }
    ```

  - åˆ¤æ–­æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘

    ![image-20220320094106519](https://cdn.fengxianhub.top/resources-master/202203200941824.png)

    ```java
    //ä¿®æ”¹ä¸€ä¸‹node
    private static class Node<E> {
        E element;//å½“å‰ç»“ç‚¹ä¿å­˜çš„å…ƒç´ 
        Node<E> left;//å·¦ç»“ç‚¹
        Node<E> right;//å³ç»“ç‚¹
        Node<E> parent;//çˆ¶ç»“ç‚¹
        public Node(E element, Node<E> parent) {
            this.element = element;
            this.parent = parent;
        }
        public boolean isLeaf(){
            return left == null && right == null;
        }
        public boolean hasTwoChildren(){
            return left != null && right != null;
        }
    }
    
    
    /**
     * åˆ¤æ–­è¯¥æ ‘æ˜¯å¦æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘
     * @return trueæ˜¯<br>falseä¸æ˜¯
     */
    public boolean isComplete(){
        if(root == null) return false;
        Queue<Node<E>> queue = new LinkedList<>();
        //å°†æ ¹ç»“ç‚¹å…¥é˜Ÿ
        queue.offer(root);
        //æ ‡è®°ä¸Šä¸€æ¬¡è®¿é—®çš„ç»“ç‚¹æ˜¯å¦åº¦ä¸ºä¸€ä¸”å­æ ‘ä¸ºå·¦å­æ ‘
        boolean flag = false;
        //éå†æ‰€æœ‰ç»“ç‚¹
        Node<E> node;
        while (!queue.isEmpty()) {
            //å‡ºé˜Ÿ
            node = queue.poll();
            //ä¸Šä¸€æ¬¡è®¿é—®çš„ç»“ç‚¹å·¦å­æ ‘å­˜åœ¨å³å­æ ‘ä¸å­˜åœ¨é‚£ä¹ˆè¿™æ¬¡è®¿é—®çš„ç»“ç‚¹å¿…é¡»æ˜¯å¶å­ç»“ç‚¹
            if(flag && !node.isLeaf()) return false;
            if(node.left != null){
                queue.offer(node.left);
            }else if(node.right != null){
                return false;
            }
            if(node.right != null){
                queue.offer(node.right);
            }else {
                flag = true;
            }
        }
        return true;
    }
    ```

## 7. å‰é©±ç»“ç‚¹ã€åç»§ç»“ç‚¹

>å¯¹äºBSTï¼ŒæŸä¸€ä¸ªç»“ç‚¹çš„å‰é©±ç»“ç‚¹å°±æ˜¯å…¶`ä¸­åºéå†`çš„å‰ä¸€ä¸ªå…ƒç´ 

![image-20220320115319255](https://cdn.fengxianhub.top/resources-master/202203201153538.png)

```java
/**
 * æ‰¾åˆ°å½“å‰ç»“ç‚¹çš„å‰é©±ç»“ç‚¹
 */
public Node<E> predecessor(Node<E> node) {
    if (node == null) throw new IllegalArgumentException("nodeä¸èƒ½ä¸ºç©º");
    //å‰é©±ç»“ç‚¹åœ¨å·¦å­æ ‘å½“ä¸­(left.right.right.......)
    Node<E> p = node.left;
    if (p != null) {
        while (p.right != null) {
            p = p.right;
        }
        return p;
    }
    //ä»ç¥–çˆ¶ç»“ç‚¹é‡Œé¢æ‰¾
    while (node.parent != null && node == node.parent.left) {
        node = node.parent;
    }
    /*
     * è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µ
     *  1. node.parent == null
     *  2. node = node.parent.right;
     */
    return node.parent;
}
```

![image-20220329234206275](https://cdn.fengxianhub.top/resources-master/202203292343988.png)

```java
/**
 * æ‰¾åˆ°å…¶åç»§ç»“ç‚¹
 */
public Node<E> successor(Node<E> node) {
    if (node == null) throw new IllegalArgumentException("nodeä¸èƒ½ä¸ºç©º");
    Node<E> p = node.right;
    //ç¬¬ä¸€ç§æƒ…å†µï¼Œå…¶åç»§ç»“ç‚¹ä¸ºnode.right.left.left...
    if (p != null) {
        while (p.left != null) {
            p = p.left;
        }
        return p;
    }
    //ä»ç¥–çˆ¶ç»“ç‚¹é‡Œé¢æ‰¾
    while (node.parent != null && node == node.parent.right) {
        node = node.parent;
    }
    /*
     * æ¥åˆ°è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µ
     *  1. node.right = null
     *  2. node = node.parent.left;
     */
    return node.parent;
}
```

## 8. removeæ–¹æ³•å®ç°

>åœ¨äºŒå‰æœç´¢æ ‘ä¸Šåˆ é™¤ç»“ç‚¹çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„éœ€è¦ç»´æŠ¤å¥½äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ï¼Œä¹Ÿå°±æ˜¯å½“å‰ç»“ç‚¹çš„å·¦å­æ ‘éƒ½æ¯”è¯¥ç»“ç‚¹å°ï¼Œå³å­æ ‘éƒ½æ¯”è¯¥ç»“ç‚¹å¤§ï¼Œå…¶å®å½¢å¼ä¸Šç­‰ä»·äºä¸­åºéå†äºŒå‰æœç´¢æ ‘çš„é›†åˆåœ¨åˆ é™¤æŸä¸ªæ•°åå†ç»„æˆçš„äºŒå‰æœç´¢æ ‘

åˆ é™¤ç»“ç‚¹ä¸€å…±å·²æœ‰ä¸‰ç§æƒ…å†µï¼š

- åˆ é™¤çš„æ˜¯å¶å­ç»“ç‚¹
- åˆ é™¤çš„æ˜¯åº¦ä¸º1çš„ç»“ç‚¹
- åˆ é™¤çš„æ˜¯åº¦ä¸º2çš„ç»“ç‚¹

### 8.1 åˆ é™¤çš„æ˜¯å¶å­ç»“ç‚¹

![image-20220323234020174](https://cdn.fengxianhub.top/resources-master/202203232340316.png)



### 8.2 åˆ é™¤çš„æ˜¯åº¦ä¸ºä¸€çš„ç»“ç‚¹

![image-20220325113623420](https://cdn.fengxianhub.top/resources-master/202203251136694.png)

### 8.3 åˆ é™¤çš„æ˜¯åº¦ä¸ºäºŒçš„ç»“ç‚¹

**è¿™é‡Œæœ‰ä¸¤ä¸ªç»“è®ºéœ€è¦é‡ç‚¹è®°å½•ä¸€ä¸‹**ï¼š

- åº¦ä¸ºä¸€çš„ç»“ç‚¹å…¶å‰é©±æˆ–è€…åç»§ç»“ç‚¹çš„åº¦ä¸º1æˆ–0
- åˆ é™¤åº¦ä¸º2çš„ç»“ç‚¹å…¶å®åˆ é™¤å…¶å‰é©±ç»“ç‚¹æˆ–è€…åç»§ç»“ç‚¹

ç¬¬ä¸€ç‚¹ï¼Œä¸ºä»€ä¹ˆåº¦ä¸º1çš„ç»“ç‚¹å…¶å‰é©±æˆ–è€…åç»§ç»“ç‚¹çš„åº¦ä¸º1æˆ–0å‘¢ï¼Œæˆ‘ä»¬å›æƒ³ä¸€ä¸‹BSTçš„æ€§è´¨ ,åœ¨BSTä¸­å½“å‰ç»“ç‚¹çš„å·¦å­æ ‘éƒ½æ¯”å…¶å°ï¼Œå³å­æ ‘éƒ½æ¯”å…¶å¤§ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ‰¾å…¶å‰é©±æˆ–è€…åç»§ç»“ç‚¹çš„æ—¶å€™æŒ‰ç…§ç¬¬ä¸ƒç‚¹é‡Œé¢çš„æ­¥éª¤ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼Œç¬¬ä¸€ç§æ˜¯`node.left.right....`æˆ–è€…`node.right.left....`ï¼Œè¿™æ ·å°±ä¸€å®šä¼šè½åˆ°å¶å­ç»“ç‚¹ä¸Šï¼›ç¬¬äºŒç§æ˜¯`node = node.parent.parent`ï¼Œè¿™æ ·çš„ç»“ç‚¹ä¸€å®šæ˜¯åº¦ä¸º1çš„ç»“ç‚¹

ç¬¬äºŒç‚¹ï¼Œä¾‹å¦‚ä¸Šé¢å¦‚æœè¦åˆ é™¤`7`è¿™ä¸ªç»“ç‚¹ï¼Œé‚£ä¹ˆåšæ³•æ˜¯åœ¨å·¦å­æ ‘ä¸Šæ‰¾åˆ°å…¶å‰é©±ç»“ç‚¹`4`ç„¶åç”¨`7`æŒ‡å‘`4`çš„`å­èŠ‚ç‚¹`ï¼Œæœ€åå†ç”¨`4`è¦†ç›–`7`è¿™ä¸ªç»“ç‚¹ï¼Œè¿™æ ·å°±ç›¸å½“äºæ˜¯åœ¨æ‰¾`7`çš„å‰é©±ç»“ç‚¹å¹¶ä¸”åˆ é™¤å®ƒ

### 8.4 ä»£ç å®ç°

```java
/**
 * å¯¹å¤–æš´éœ²çš„åˆ é™¤æ–¹æ³•
 */
public void remove(E element) {
    remove(node(element));
}
/**
 * æ ¹æ®ç»“ç‚¹åˆ é™¤è¯¥ç»“ç‚¹
 */
private void remove(Node<E> node) {
    if (node == null) return;
    //ä¼˜å…ˆå¤„ç†åº¦ä¸º2çš„ç»“ç‚¹
    if (node.hasTwoChildren()) {
        //æ‰¾åˆ°å…¶åç»§ç»“ç‚¹
        Node<E> successor = successor(node);
        //ç”¨åç»§ç»“ç‚¹çš„å€¼è¦†ç›–åº¦ä¸º2çš„ç»“ç‚¹çš„å€¼
        node.element = successor.element;
        //å› ä¸ºåº¦ä¸º2çš„ç»“ç‚¹çš„åç»§æˆ–è€…å‰é©±ç»“ç‚¹ä¸€å®šæ˜¯åº¦ä¸º1æˆ–0ï¼Œæ‰€ä»¥å°†åˆ é™¤ç»“ç‚¹äº¤ç»™åé¢çš„ä»£ç æ¥åš
        node = successor;
    }
    //åˆ é™¤åº¦ä¸º1æˆ–è€…åº¦ä¸º0çš„ç»“ç‚¹
    Node<E> replaceNode = node.left != null ? node.left : node.right;
    /*
     * è¿™é‡Œæœ‰ä¸‰ç§æƒ…å†µï¼Œéœ€è¦åˆ†ç±»è®¨è®º
     *  1. nodeæ˜¯åº¦ä¸º1çš„ç»“ç‚¹
     *  2. nodeæ˜¯å¶å­ç»“ç‚¹å¹¶ä¸”æ˜¯æ ¹ç»“ç‚¹
     *  3. nodeæ˜¯å¶å­ç»“ç‚¹
     */
    if (replaceNode != null) {
        //å…ˆä¿®æ”¹node.parentçš„æŒ‡å‘
        replaceNode.parent = node.parent;
        //ä¿®æ”¹parentçš„leftã€rightæŒ‡å‘
        if(node.parent == null){ //nodeæ˜¯åº¦ä¸º1çš„ç»“ç‚¹ä¸”æ˜¯æ ¹ç»“ç‚¹
            root = replaceNode;
        }else if(node == node.parent.left){
            node.parent.left = replaceNode;
        }else {
            node.parent.right = replaceNode;
        }
    } else if (node.parent == null) {
        //nodeæ˜¯å¶å­ç»“ç‚¹å¹¶ä¸”æ˜¯æ ¹ç»“ç‚¹,ç›´æ¥è®©è¯¥ç»“ç‚¹ä¸ºnull
        root = null;
    } else {
        //å¶å­ç»“ç‚¹
        //çˆ¶ç»“ç‚¹çš„å·¦å­æ ‘
        if (node == node.parent.left) {
            node.parent.left = null;
        } else {
            //çˆ¶ç»“ç‚¹å³å­æ ‘
            node.parent.right = null;
        }
    }
    //å°†å…ƒç´ æ•°é‡-1
    size--;
}
/**
 * æ ¹æ®ä¼ å…¥çš„å…ƒç´ æ‰¾åˆ°ç»“ç‚¹
 */
private Node<E> node(E element) {
    Node<E> node = root;
    while (node != null) {
        int cmp = compare(element, node.element);
        if (cmp == 0) return node;
        if (cmp > 0) {
            node = node.right;
        } else {
            node = node.left;
        }
    }
    //æ²¡æ‰¾åˆ°
    return null;
}
```

## 9. è®¾è®¡ç»§æ‰¿ç»“æ„ï¼Œé‡æ„BST

>æˆ‘ä»¬éœ€è¦å°†ä¸€äº›å…±æœ‰çš„æ–¹æ³•æå–å‡ºæ¥ï¼Œé‡æ–°è®¾è®¡ä¸€ä¸‹äºŒå‰æœç´¢æ ‘ä¸äºŒå‰æ ‘ä¹‹é—´çš„ç»§æ‰¿ç»“æ„

![image-20220408163155272](https://cdn.fengxianhub.top/resources-master/202203232318066.png)

è´´ä¸€ä¸‹ä¹‹é—´å†™çš„å®Œæ•´ä»£ç 

```java
package com.fx.binarySearchTree;


import java.util.LinkedList;
import java.util.Queue;
import java.util.Stack;

/**
 * @author: Eureka
 * @date: 2022/3/14 20:12
 * Description: äºŒå‰æœç´¢æ ‘
 */
@SuppressWarnings("unchecked")
public class BinarySearchTree<E> {
    //ç»“ç‚¹ä»¥å†…éƒ¨ç±»çš„å½¢å¼å­˜åœ¨
    private static class Node<E> {
        E element;//å½“å‰ç»“ç‚¹ä¿å­˜çš„å…ƒç´ 
        Node<E> left;//å·¦ç»“ç‚¹
        Node<E> right;//å³ç»“ç‚¹
        Node<E> parent;//çˆ¶ç»“ç‚¹

        public Node(E element, Node<E> parent) {
            this.element = element;
            this.parent = parent;
        }

        public boolean isLeaf() {
            return left == null && right == null;
        }

        public boolean hasTwoChildren() {
            return left != null && right != null;
        }
    }

    private int size;//å½“å‰æ ‘ç»“ç‚¹ä¸ªæ•°
    private Node<E> root;//æ ¹ç»“ç‚¹
    private Comparator<E> comparator;//æ¯”è¾ƒå™¨

    public BinarySearchTree() {

    }

    public BinarySearchTree(Comparator<E> comparator) {
        this.comparator = comparator;
    }

    public void add(E element) {
        //éç©ºæ£€æµ‹
        elementNotNullCheck(element);
        //å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºæ ¹ç»“ç‚¹
        if (root == null) {
            root = new Node<>(element, null);
        }
        //éæ ¹ç»“ç‚¹ï¼Œéé€’å½’è¿›è¡Œæ·»åŠ 
        Node<E> node = root;//ç”¨æ¥æ ‡è®°ç§»åŠ¨çš„ç»“ç‚¹
        Node<E> parent = root;//ä¿å­˜å½“å‰ç»“ç‚¹çš„çˆ¶ç»“ç‚¹ï¼Œé»˜è®¤æ ¹ç»“ç‚¹å°±æ˜¯çˆ¶ç»“ç‚¹
        //æ ¹æ®æ¯”è¾ƒè§„åˆ™æ‰¾åˆ°å¾…æ·»åŠ å…ƒç´ çš„ä½ç½®
        int cmp = 0;
        while (node != null) {
            //æ¯”è¾ƒå€¼
            cmp = compare(element, node.element);
            //ä¿å­˜å½“å‰ç»“ç‚¹çš„çˆ¶ç»“ç‚¹
            parent = node;
            if (cmp > 0) {
                node = node.right;
            } else if (cmp < 0) {
                node = node.left;
            } else {
                return;
            }
        }
        //æ·»åŠ å…ƒç´ 
        Node<E> newNode = new Node<>(element, parent);
        if (cmp > 0) {
            parent.right = newNode;
        } else {
            parent.left = newNode;
        }
        size++;
    }

    /**
     * å¯¹å¤–æš´éœ²çš„åˆ é™¤æ–¹æ³•
     */
    public void remove(E element) {
        remove(node(element));
    }

    /**
     * æ ¹æ®ç»“ç‚¹åˆ é™¤è¯¥ç»“ç‚¹
     */
    private void remove(Node<E> node) {
        if (node == null) return;
        //ä¼˜å…ˆå¤„ç†åº¦ä¸º2çš„ç»“ç‚¹
        if (node.hasTwoChildren()) {
            //æ‰¾åˆ°å…¶åç»§ç»“ç‚¹
            Node<E> successor = successor(node);
            //ç”¨åç»§ç»“ç‚¹çš„å€¼è¦†ç›–åº¦ä¸º2çš„ç»“ç‚¹çš„å€¼
            node.element = successor.element;
            //å› ä¸ºåº¦ä¸º2çš„ç»“ç‚¹çš„åç»§æˆ–è€…å‰é©±ç»“ç‚¹ä¸€å®šæ˜¯åº¦ä¸º1æˆ–0ï¼Œæ‰€ä»¥å°†åˆ é™¤ç»“ç‚¹äº¤ç»™åé¢çš„ä»£ç æ¥åš
            node = successor;
        }
        //åˆ é™¤åº¦ä¸º1æˆ–è€…åº¦ä¸º0çš„ç»“ç‚¹
        Node<E> replaceNode = node.left != null ? node.left : node.right;
        /*
         * è¿™é‡Œæœ‰ä¸‰ç§æƒ…å†µï¼Œéœ€è¦åˆ†ç±»è®¨è®º
         *  1. nodeæ˜¯åº¦ä¸º1çš„ç»“ç‚¹
         *  2. nodeæ˜¯å¶å­ç»“ç‚¹å¹¶ä¸”æ˜¯æ ¹ç»“ç‚¹
         *  3. nodeæ˜¯å¶å­ç»“ç‚¹
         */
        if (replaceNode != null) {
            //å…ˆä¿®æ”¹node.parentçš„æŒ‡å‘
            replaceNode.parent = node.parent;
            //ä¿®æ”¹parentçš„leftã€rightæŒ‡å‘
            if(node.parent == null){ //nodeæ˜¯åº¦ä¸º1çš„ç»“ç‚¹ä¸”æ˜¯æ ¹ç»“ç‚¹
                root = replaceNode;
            }else if(node == node.parent.left){
                node.parent.left = replaceNode;
            }else {
                node.parent.right = replaceNode;
            }
        } else if (node.parent == null) {
            //nodeæ˜¯å¶å­ç»“ç‚¹å¹¶ä¸”æ˜¯æ ¹ç»“ç‚¹,ç›´æ¥è®©è¯¥ç»“ç‚¹ä¸ºnull
            root = null;
        } else {
            //å¶å­ç»“ç‚¹
            //çˆ¶ç»“ç‚¹çš„å·¦å­æ ‘
            if (node == node.parent.left) {
                node.parent.left = null;
            } else {
                //çˆ¶ç»“ç‚¹å³å­æ ‘
                node.parent.right = null;
            }
        }
    }

    /**
     * æ ¹æ®ä¼ å…¥çš„å…ƒç´ æ‰¾åˆ°ç»“ç‚¹
     */
    private Node<E> node(E element) {
        Node<E> node = root;
        while (node != null) {
            int cmp = compare(element, node.element);
            if (cmp == 0) return node;
            if (cmp > 0) {
                node = node.right;
            } else {
                node = node.left;
            }
        }
        //æ²¡æ‰¾åˆ°
        return null;
    }

    public boolean contains(E e) {
        return node(e) != null;
    }


    /**
     * è§„å®šä¼ å…¥å¯¹è±¡çš„æ¯”è¾ƒè§„åˆ™
     *
     * @param e1 ç¬¬ä¸€ä¸ªå¯¹è±¡
     * @param e2 ç¬¬äºŒä¸ªå¯¹è±¡
     * @return 0è¡¨ç¤ºç›¸ç­‰ï¼Œå¤§äº0è¡¨ç¤º e1 > e2,å°äº0è¡¨ç¤º e2 < e1
     */
    private int compare(E e1, E e2) {
        if (comparator != null) {
            return comparator.compare(e1, e2);
        }
        return ((java.lang.Comparable<E>) e1).compareTo(e2);
    }

    /**
     * è¿”å›æ ‘ç»“ç‚¹ä¸ªæ•°
     */
    public int size() {
        return size;
    }

    /**
     * åˆ¤æ–­æ ‘æ˜¯å¦ä¸ºç©º
     */
    public boolean isEmpty() {
        return size == 0;
    }

    /**
     * æ¸…ç©ºå½“å‰æ ‘
     */
    public void clear() {
        root = null;
        size = 0;
    }


    /**
     * åˆ¤æ–­å…ƒç´ æ˜¯å¦ä¸ºç©º
     */
    private void elementNotNullCheck(E element) {
        if (element == null) {
            throw new IllegalArgumentException("element must not be null");
        }
    }

    /**
     * é€’å½’è¾“å‡ºæ ‘çš„é«˜åº¦
     *
     * @return è¿”å›æ ‘çš„é«˜åº¦
     */
    public int height() {
        return height(root);
    }

    private int height(Node<E> node) {
        if (node == null) return 0;
        return 1 + Math.max(height(node.left), height(node.right));
    }

    /**
     * éé€’å½’è¿”å›æ ‘çš„é«˜åº¦
     *
     * @return æ ‘çš„é«˜åº¦
     */
    public int heightByLevelOrder() {
        Queue<Node<E>> queue = new LinkedList<>();
        //å°†æ ¹ç»“ç‚¹å…¥é˜Ÿ
        queue.offer(root);
        //è®°å½•æ ‘çš„é«˜åº¦
        int height = 0;
        //è®°å½•æ¯ä¸€å±‚çš„å…ƒç´ æ•°é‡
        int levelSize = 1;
        while (!queue.isEmpty()) {
            //å‡ºé˜Ÿ
            Node<E> node = queue.poll();
            //å½“å‰å±‚å…ƒç´ å‡å°‘
            levelSize--;
            if (node.left != null) queue.offer(node.left);
            if (node.right != null) queue.offer(node.right);
            //è®¿é—®ä¸‹ä¸€å±‚
            if (levelSize == 0) {
                levelSize = queue.size();
                height++;
            }
        }
        return height;
    }

    /**
     * åˆ¤æ–­è¯¥æ ‘æ˜¯å¦æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘
     *
     * @return trueæ˜¯<br>falseä¸æ˜¯
     */
    public boolean isComplete() {
        if (root == null) return false;
        Queue<Node<E>> queue = new LinkedList<>();
        //å°†æ ¹ç»“ç‚¹å…¥é˜Ÿ
        queue.offer(root);
        //æ ‡è®°ä¸Šä¸€æ¬¡è®¿é—®çš„ç»“ç‚¹æ˜¯å¦åº¦ä¸ºä¸€ä¸”å­æ ‘ä¸ºå·¦å­æ ‘
        boolean flag = false;
        //éå†æ‰€æœ‰ç»“ç‚¹
        Node<E> node;
        while (!queue.isEmpty()) {
            //å‡ºé˜Ÿ
            node = queue.poll();
            //ä¸Šä¸€æ¬¡è®¿é—®çš„ç»“ç‚¹å·¦å­æ ‘å­˜åœ¨å³å­æ ‘ä¸å­˜åœ¨é‚£ä¹ˆè¿™æ¬¡è®¿é—®çš„ç»“ç‚¹å¿…é¡»æ˜¯å¶å­ç»“ç‚¹
            if (flag && !node.isLeaf()) return false;
            if (node.left != null) {
                queue.offer(node.left);
            } else if (node.right != null) {
                return false;
            }
            if (node.right != null) {
                queue.offer(node.right);
            } else {
                flag = true;
            }
        }
        return true;
    }


    /**
     * éå†æ¥å£
     *
     * @param <E> visit è¿”å›trueè¡¨ç¤ºåœæ­¢éå†<br>è¿”å›falseè¡¨ç¤ºä¸åœæ­¢ï¼Œç»§ç»­éå†
     */
    public abstract static class Visitor<E> {
        /**
         * stopç”¨æ¥æ ‡è®°é€’å½’éå†ä¸­æ˜¯å¦éœ€è¦åœæ­¢éå†
         */
        boolean stop = false;

        abstract boolean visit(E element);
    }

    /**
     * å‰åºéå†
     */
    public void preorderTraversal(Visitor<E> visitor) {
        if (visitor == null) throw new IllegalArgumentException("visitorä¸èƒ½ä¸ºç©º");
        preorderTraversal(root, visitor);
    }

    private void preorderTraversal(Node<E> node, Visitor<E> visitor) {
        if (node == null) return;
        //å›è°ƒ
        if (visitor.stop) return;
        visitor.stop = visitor.visit(node.element);
        preorderTraversal(node.left, visitor);
        preorderTraversal(node.right, visitor);
    }

    /**
     * æ ˆå®ç°å‰åºéå†
     */
    private final Stack<Node<E>> stack = new Stack<>();

    public void preorderTraversalByStack(Visitor<E> visitor) {
        if (root == null) throw new IllegalArgumentException("Visitorä¸èƒ½ä¸ºç©º");
        //å°†æ ¹å…ƒç´ å…¥æ ˆ
        preorderTraversalByStack(root, visitor);
    }

    private void preorderTraversalByStack(Node<E> popNode, Visitor<E> visitor) {
        while (popNode != null) {
            //å›è°ƒ
            if (visitor.stop) return;
            visitor.stop = visitor.visit(popNode.element);
            //å°†å…¶å³ç»“ç‚¹å…¥æ ˆ
            if (popNode.right != null) {
                stack.push(popNode.right);
            }
            //å°†å…¶å·¦ç»“ç‚¹å…¥æ ˆ
            if (popNode.left != null) {
                stack.push(popNode.left);
            }
            //å°†æ ˆé¡¶å…ƒç´ å‡ºæ ˆ
            popNode = stack.isEmpty() ? null : stack.pop();
        }
    }

    /**
     * ä¸­åºéå†ï¼ˆé€’å½’å®ç°ï¼‰
     */
    public void inorderTraversal(Visitor<E> visitor) {
        if (visitor == null) throw new IllegalArgumentException("visitorä¸èƒ½ä¸ºç©º");
        inorderTraversal(root, visitor);
    }

    private void inorderTraversal(Node<E> node, Visitor<E> visitor) {
        if (node == null || visitor.stop) return;
        inorderTraversal(node.left, visitor);
        //å›è°ƒ
        if (visitor.stop) return;
        visitor.stop = visitor.visit(node.element);
        inorderTraversal(node.right, visitor);
    }

    /**
     * ä¸­åºæ ˆå®ç°
     */
    public void inorderTraversalByStack(Visitor<E> visitor) {
        if (root == null || visitor == null) throw new IllegalArgumentException("Visitorä¸èƒ½ä¸ºç©º");
        inorderTraversalByStack(root, visitor);
    }

    private void inorderTraversalByStack(Node<E> popNode, Visitor<E> visitor) {
        //åªè¦å·¦ç»“ç‚¹å­˜åœ¨å°±ä¸€ç›´å…¥æ ˆ
        while (true) {
            if (popNode != null) {
                stack.push(popNode);
                popNode = popNode.left;
            } else {
                if (stack.isEmpty()) return;
                popNode = stack.pop();
                //å›è°ƒ
                visitor.visit(popNode.element);
                popNode = popNode.right;
            }
        }
    }

    /**
     * ååºéå†
     */
    public void postorderTraversal(Visitor<E> visitor) {
        if (visitor == null) throw new IllegalArgumentException("visitorä¸èƒ½ä¸ºç©º");
        postorderTraversal(root, visitor);
    }

    public void postorderTraversal(Node<E> node, Visitor<E> visitor) {
        if (node == null || visitor.stop) return;
        postorderTraversal(node.left, visitor);
        postorderTraversal(node.right, visitor);
        if (visitor.stop) return;
        visitor.stop = visitor.visit(node.element);
    }

    /**
     * ååºéå†éé€’å½’å®ç°
     */
    public void postorderTraversalByStack() {
        postorderTraversalByStack(root);
    }

    public void postorderTraversalByStack(Node<E> root) {
        if (root == null) return;
        Stack<Node<E>> stack = new Stack<>();
        stack.push(root);
        Node<E> temp = null;
        while (!stack.isEmpty()) {
            temp = stack.pop();
            //ä¸šåŠ¡é€»è¾‘
            System.out.println(temp);
            if (temp.left != null) {
                stack.push(temp.left);
            }
            if (temp.right != null) {
                stack.push(temp.right);
            }
        }
    }

    private boolean isLeafNode(Node<E> node) {
        System.out.println(node.element);
        return node.left == null && node.right == null;
    }

    private boolean isPeekStack(Node<E> node) {
        return stack.peek().left == node || stack.peek().right == node;
    }


    /**
     * å±‚åºéå†æ¥å£æš´éœ²
     *
     * @param visitor é€»è¾‘æ¥å£
     */
    public void leverOrderTraversal(Visitor<E> visitor) {
        if (visitor == null || root == null) throw new IllegalArgumentException("Visitorä¸èƒ½ä¸ºç©º");
        Queue<Node<E>> queue = new LinkedList<>();
        //å°†æ ¹ç»“ç‚¹å…¥é˜Ÿ
        queue.offer(root);
        while (!queue.isEmpty()) {
            //å‡ºé˜Ÿ
            Node<E> node = queue.poll();
            //å›è°ƒï¼Œå°†å¤„ç†éå†æ•°æ®çš„ä¸šåŠ¡äº¤ç»™è°ƒç”¨è€…
            if (visitor.visit(node.element)) return;
            if (node.left != null) queue.offer(node.left);
            if (node.right != null) queue.offer(node.right);
        }
    }

    /**
     * æ‰¾åˆ°å½“å‰ç»“ç‚¹çš„å‰é©±ç»“ç‚¹
     */
    public Node<E> predecessor(Node<E> node) {
        if (node == null) throw new IllegalArgumentException("nodeä¸èƒ½ä¸ºç©º");
        //å‰é©±ç»“ç‚¹åœ¨å·¦å­æ ‘å½“ä¸­(left.right.right.......)
        Node<E> p = node.left;
        if (p != null) {
            while (p.right != null) {
                p = p.right;
            }
            return p;
        }
        //ä»ç¥–çˆ¶ç»“ç‚¹é‡Œé¢æ‰¾
        while (node.parent != null && node == node.parent.left) {
            node = node.parent;
        }

        /*
         * è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µ
         *  1. node.parent == null
         *  2. node = node.parent.right;
         */
        return node.parent;
    }

    /**
     * æ‰¾åˆ°å…¶åç»§ç»“ç‚¹
     */
    public Node<E> successor(Node<E> node) {
        if (node == null) throw new IllegalArgumentException("nodeä¸èƒ½ä¸ºç©º");
        Node<E> p = node.right;
        //ç¬¬ä¸€ç§æƒ…å†µï¼Œå…¶åç»§ç»“ç‚¹ä¸ºnode.right.left.left...
        if (p != null) {
            while (p.left != null) {
                p = p.left;
            }
            return p;
        }

        //ä»ç¥–çˆ¶ç»“ç‚¹é‡Œé¢æ‰¾
        while (node.parent != null && node == node.parent.right) {
            node = node.parent;
        }

        /*
         * æ¥åˆ°è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µ
         *  1. node.right = null
         *  2. node = node.parent.left;
         */
        return node.parent;
    }
}
```

ç°åœ¨æˆ‘ä»¬éœ€è¦æŠŠäºŒå‰æ ‘å…±æœ‰çš„æ–¹æ³•æå–å‡ºæ¥ï¼Œæˆ‘è¿™é‡Œæ”¾ä¸€å¼ å…±æœ‰æ–¹æ³•çš„å›¾

>BinaryTree

![image-20220325141629649](https://cdn.fengxianhub.top/resources-master/202203251417289.png)

>BST

![image-20220325141650734](https://cdn.fengxianhub.top/resources-master/202203251417541.png)

è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ç”¨äºç»§æ‰¿çš„æ–¹æ³•è¦å°†è®¿é—®æƒé™ä¿®æ”¹ä¸º`protected`ï¼Œç„¶åä¸€æ£µBSTå°±å†™å¥½äº†ğŸ˜„



















































